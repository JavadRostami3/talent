# ุฑููุฏ ุซุจุชโูุงู ุงุณุชุนุฏุงุฏ ุฏุฑุฎุดุงู ุงุฑุดุฏ (MA_TALENT)

## ๐ ูุฑุงุญู ุซุจุชโูุงู (6 ูุฑุญูู)

### **ูุฑุญูู 1๏ธโฃ: ุงูุชุฎุงุจ ุฑุดุชู (Program Selection)**

**ุชูุถุญ:** ุฏุงูุทูุจ ุงุจุชุฏุง ฺฉ ุง ฺูุฏ ุฑุดุชู ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ.

**ููุชุฑูุง ุฌุณุชุฌู:**
- ฺฏุฑูู ุขููุฒุด (Department)
- ฺฏุฑุงุด (Orientation)
- ุฑุดุชู ฺฉุงุฑุดูุงุณ ูุฑุชุจุท (Related BSc Field)
- ุฌุณุชุฌู ูุงู ุฑุดุชู (Search by Name)

**ูุฏู:** `ApplicationChoice`
```python
{
    "application_id": int,
    "program_id": int,      # ุฑุดุชู ุงูุชุฎุงุจ ุดุฏู
    "priority": int         # ุงูููุช 1ุ 2ุ 3
}
```

**ูุญุฏูุฏุช:** ุญุฏุงฺฉุซุฑ 3 ุฑุดุชู ูุงุจู ุงูุชุฎุงุจ

**API:**
```http
GET  /api/programs/?search={query}&department={id}
POST /api/applications/{id}/choices/
```

---

### **ูุฑุญูู 2๏ธโฃ: ุงุทูุงุนุงุช ุดุฎุต (Personal Information)**

**ุชูุถุญ:** ุฏุงูุทูุจ ุงุทูุงุนุงุช ุดูุงุณุง ู ุชูุงุณ ุฎูุฏ ุฑุง ูุงุฑุฏ ูโฺฉูุฏ.

**ููุฏูุง ุฏุฑ ูุฏู `User`:**
```python
{
    "first_name": str,                      # ูุงู
    "last_name": str,                       # ูุงู ุฎุงููุงุฏฺฏ
    "national_id": str,                     # ฺฉุฏ ูู (ูพุดโูพุฑ ุดุฏู)
    "father_name": str,                     # ูุงู ูพุฏุฑ
    "birth_certificate_number": str,        # ุดูุงุฑู ุดูุงุณูุงูู
    "birth_certificate_serial": str,        # ุดูุงุฑู ุณุฑุงู ุดูุงุณูุงูู
    "birth_certificate_issue_place": str,   # ูุญู ุตุฏูุฑ ุดูุงุณูุงูู
    "gender": str,                          # ุฌูุณุช (MALE/FEMALE)
    "birth_year": int,                      # ุณุงู ุชููุฏ (dropdown)
    "birth_place": str,                     # ูุญู ุชููุฏ
    "mobile": str,                          # ุชููู ููุฑุงู
    "email": str                            # ูพุณุช ุงูฺฉุชุฑููฺฉ
}
```

**ููุฏูุง ุฏุฑ ูุฏู `ApplicantProfile`:**
```python
{
    "address": str,    # ูุดุงู ูุญู ุณฺฉููุช ุฏุงุฆู
    "phone": str       # ุชููู ุชูุงุณ
}
```

**ูฺฺฏโูุง ูุฑู:**
- ฺฉุฏ ูู: ููุฏ ูพุดโูพุฑ ุดุฏู (ุบุฑูุงุจู ูุฑุงุด)
- ุฌูุณุช: Radio Button (ูุฑุฏ/ุฒู)
- ุณุงู ุชููุฏ: Dropdown (1320 ุชุง 1390)
- **ูุถุนุช ูุธุงู ูุธูู:** Dropdown (ููุท ุจุฑุง ูุฑุฏุงู ููุงุด ุฏุงุฏู ูโุดูุฏ)
  - ูุนุงูุช ุฏุงุฆู
  - ูุนุงูุช ุชุญุตู
  - ุฏุฑ ุญุงู ุฎุฏูุช
  - ูพุงุงู ุฎุฏูุช
  - ูุนุงูุช ูพุฒุดฺฉ
  - ูุดููู
- ููู ููุฏูุง ุงูุฒุงู ูุณุชูุฏ (ูุถุนุช ูุธุงู ูุธูู ููุท ุจุฑุง ูุฑุฏุงู)

**API:**
```http
PATCH /api/accounts/users/{id}/
PATCH /api/accounts/profiles/{id}/
```

---

### **ูุฑุญูู 3๏ธโฃ: ุจุงุฑฺฏุฐุงุฑ ูุฏุงุฑฺฉ ุดูุงุณุง (Identity Documents)**

**ุชูุถุญ:** ุฏุงูุทูุจ ุจุงุฏ 3 ูุฏุฑฺฉ ุดูุงุณุง ุฑุง ุขูพููุฏ ฺฉูุฏ.

**ูุฏุงุฑฺฉ ุงูุฒุงู:**
1. **ุนฺฉุณ ูพุฑุณูู** (`PERSONAL_PHOTO`)
2. **ุชุตูุฑ ฺฉุงุฑุช ูู** (`NATIONAL_CARD`)
3. **ุชุตูุฑ ุดูุงุณูุงูู** (`ID_CARD`)

**ูุฑูุชโูุง ูุฌุงุฒ:** PDF, JPG, JPEG, PNG

**ูุฏู:** `ApplicationDocument`
```python
{
    "application_id": int,
    "type": str,           # PERSONAL_PHOTO, NATIONAL_CARD, ID_CARD
    "file": File,
    "status": "UPLOADED"   # ูพุดโูุฑุถ
}
```

**ูุณุฑ ุฐุฎุฑู:**
```
applications/{tracking_code}/documents/{type}/{filename}
```

**API:**
```http
POST /api/documents/upload/
GET  /api/documents/?application={id}&type=PERSONAL_PHOTO
DELETE /api/documents/{id}/
```

**ุงุนุชุจุงุฑุณูุฌ:**
- ุญุฌู ูุงู: ุญุฏุงฺฉุซุฑ 5MB
- ูุฑูุช: ['pdf', 'jpg', 'jpeg', 'png']
- ูุฑ ููุน ูุฏุฑฺฉ ููุท ฺฉ ูุงู

---

### **ูุฑุญูู 4๏ธโฃ: ุงุทูุงุนุงุช ุชุญุตู (Educational Information)**

**ุชูุถุญ:** ุฏุงูุทูุจ ุณูุงุจู ุชุญุตู ฺฉุงุฑุดูุงุณ ุฎูุฏ ุฑุง ูุงุฑุฏ ูโฺฉูุฏ.

**ููุฏูุง ูุฏู `ApplicationEducationRecord`:**
```python
{
    "application_id": int,
    "degree_level": "BSC",                  # ฺฉุงุฑุดูุงุณ
    "status": str,                          # STUDYING ุง GRADUATED
    "university_id": int,                   # ุงุฒ ูุณุช (ูุงุจู ุฌุณุชุฌู)
    "field_of_study": str,                  # ุฑุดุชู ุชุญุตู (ุงุฒ ูุณุช)
    "total_units_passed": int,              # ุชุนุฏุงุฏ ูุงุญุฏ ฺฏุฐุฑุงูุฏู
    "semester_count": int,                  # ุชุนุฏุงุฏ ููุณุงู ฺฏุฐุฑุงูุฏู
    "gpa": Decimal,                         # ูุนุฏู ฺฉุงุฑุดูุงุณ (XX.XX)
    "class_size": int,                      # ุชุนุฏุงุฏ ุฏุงูุดุฌู ุฏูุฑู
    "rank_status": str,                     # ูุถุนุช ุฑุชุจู (ูุชู)
    "start_date": str,                      # ุชุงุฑุฎ ุดุฑูุน (ูุซุงู: 1-1400)
    "end_date": str                         # ุชุงุฑุฎ ูพุงุงู (ุงุฎุชุงุฑ)
}
```

**ูฺฺฏโูุง ูุฑู:**
- **ูุถุนุช ุชุญุตู:** Radio Button (ุฏุฑุญุงู ุชุญุตู / ูุงุฑุบโุงูุชุญุตู)
- **ุฏุงูุดฺฏุงู:** Dropdown ุจุง ูุงุจูุช ุฌุณุชุฌู (Searchable Select)
- **ุฑุดุชู ุชุญุตู:** Dropdown ุจุง ูุงุจูุช ุฌุณุชุฌู
- **ูุนุฏู:** Input ุฏู ุฑูู ุงุนุดุงุฑ (17.39)
- **ูุถุนุช ุฑุชุจู:** ูุซุงู: "ุฑุชุจู 2 ุงุฒ 30 ุฏุฑุตุฏ (ุฏููู ุงุตู)"
- **ุชุงุฑุฎ ูพุงุงู:** ุงฺฏุฑ "ุฏุฑ ุญุงู ุชุญุตู" ุจุงุดุฏุ ุฎุงู ุจูุงูุฏ

**API:**
```http
POST /api/applications/education-records/
GET  /api/universities/?search={query}
```

---

### **ูุฑุญูู 5๏ธโฃ: ุจุงุฑฺฏุฐุงุฑ ูุฏุงุฑฺฉ ุชุญุตู (Education Documents)**

**ุชูุถุญ:** ุฏุงูุทูุจ ูุฏุงุฑฺฉ ุชุญุตู ุฎูุฏ ุฑุง ุขูพููุฏ ูโฺฉูุฏ.

**ูุฏุงุฑฺฉ ููุฑุฏ ูุงุฒ:**
1. **ูุฏุฑฺฉ ฺฉุงุฑุดูุงุณ** (`BSC_CERT`) - ุงฺฏุฑ ูุงุฑุบโุงูุชุญุตู ุจุงุดุฏ
2. **ฺฏูุงู ุฏุงูุดุฌู ููุชุงุฒ** (`EXCELLENCE_CERT`) - ุงุฎุชุงุฑ
3. **ุฑุฒููุฑุงุช ฺฉุงุฑุดูุงุณ** (`TRANSCRIPT`) - ุงูุฒุงู

**ูฺฉุงุช:**
- ุงฺฏุฑ "ุฏุฑ ุญุงู ุชุญุตู" โ ูุฏุฑฺฉ ฺฉุงุฑุดูุงุณ ุงุฌุจุงุฑ ูุณุช
- ูุฑูุช ู API ูุดุงุจู ูุฑุญูู 3 ุงุณุช

**API:**
```http
POST /api/documents/upload/
```

---

### **ูุฑุญูู 6๏ธโฃ: ุจุงุฑฺฏุฐุงุฑ ุณูุงุจู ุนูู (Scientific Records) - ุงุฎุชุงุฑ**

**ุชูุถุญ:** ุฏุงูุทูุจ ูโุชูุงูุฏ ููุงูุงุช ู ูพฺููุดโูุง ุนูู ุฎูุฏ ุฑุง ุซุจุช ฺฉูุฏ.

**ูุฏู:** `ScientificRecord`
```python
{
    "application_id": int,
    "type": str,              # ARTICLE, BOOK, CONFERENCE, PATENT, OTHER
    "title": str,             # ุนููุงู
    "journal_or_event": str,  # ูุงู ฺูุฑูุงู/ฺฉููุฑุงูุณ
    "year": int,              # ุณุงู ุงูุชุดุงุฑ
    "file": File              # ูุงู (ุงุฎุชุงุฑ)
}
```

**API:**
```http
POST /api/applications/scientific-records/
DELETE /api/applications/scientific-records/{id}/
```

---

## ๐ ฺฏุฑุฏุด ฺฉุงุฑ (Workflow States)

### **ูุถุนุชโูุง Application:**

| Status | ุชูุถุญ | ุฒูุงู ุงุฌุงุฏ |
|--------|-------|------------|
| `NEW` | ุซุจุชโูุงู ุงููู | ุดุฑูุน (ูุฑุญูู 0) |
| `PROGRAM_SELECTED` | ุฑุดุชู ุงูุชุฎุงุจ ุดุฏ | ุจุนุฏ ุงุฒ ูุฑุญูู 1 |
| `PERSONAL_INFO_COMPLETED` | ุงุทูุงุนุงุช ุดุฎุต ุชฺฉูู ุดุฏ | ุจุนุฏ ุงุฒ ูุฑุญูู 2 |
| `IDENTITY_DOCS_UPLOADED` | ูุฏุงุฑฺฉ ุดูุงุณุง ุขูพููุฏ ุดุฏ | ุจุนุฏ ุงุฒ ูุฑุญูู 3 |
| `EDU_INFO_COMPLETED` | ุงุทูุงุนุงุช ุชุญุตู ุชฺฉูู ุดุฏ | ุจุนุฏ ุงุฒ ูุฑุญูู 4 |
| `EDU_DOCS_UPLOADED` | ูุฏุงุฑฺฉ ุชุญุตู ุขูพููุฏ ุดุฏ | ุจุนุฏ ุงุฒ ูุฑุญูู 5 |
| `SUBMITTED` | ูุฑู ููุง ุงุฑุณุงู ุดุฏ | ุจุนุฏ ุงุฒ ูุฑุญูู 6 |
| `UNDER_REVIEW` | ุฏุฑ ุญุงู ุจุฑุฑุณ | ุงุฏูู ุดุฑูุน ุจู ุจุฑุฑุณ ฺฉุฑุฏ |
| `RETURNED` | ุจุฑฺฏุดุช ุจู ุฏุงูุทูุจ | ุงุฏูู ููุต ุชุดุฎุต ุฏุงุฏ |
| `COMPLETED` | ูพุฑููุฏู ุชฺฉูู ุดุฏ | ุงุฏูู ุชุงุฏ ฺฉุฑุฏ |

---

## ๐จโ๐ผ ูพูู ุงุฏูู (Admin Review)

### **ุฏู ุจุฎุด ุจุฑุฑุณ:**

#### **1. ุจุฑุฑุณ ูุฏุงุฑฺฉ ุดูุงุณุง**
ูุฏู: `FormReview` ุจุง `document_type="IDENTITY_DOCS"`

**ููุงุฑุฏ ุจุฑุฑุณ:**
- [ ] ุนฺฉุณ ูพุฑุณูู
- [ ] ฺฉุงุฑุช ูู
- [ ] ุดูุงุณูุงูู

**ฺฏุฒููโูุง ุชุงุฏ:**
- โ **ุชุงุฏ ุดุฏู** (`APPROVED`)
- โ๏ธ **ุชุงุฏุดุฏู ุจุง ููุต** (`APPROVED_WITH_DEFECT`) + ุชฺฉ ููุงุฑุฏ ููุต
- โ **ูุฑู ุชุงุฏ ูุดุฏู** (`REJECTED`)

#### **2. ุจุฑุฑุณ ูุฏุงุฑฺฉ ุชุญุตู**
ูุฏู: `FormReview` ุจุง `document_type="EDUCATION_DOCS"`

**ููุงุฑุฏ ุจุฑุฑุณ:**
- [ ] ูุฏุฑฺฉ ฺฉุงุฑุดูุงุณ
- [ ] ฺฏูุงู ุฏุงูุดุฌู ููุชุงุฒ
- [ ] ุฑุฒููุฑุงุช ฺฉุงุฑุดูุงุณ

**ฺฏุฒููโูุง ุชุงุฏ:** (ูุดุงุจู ุจุงูุง)

### **ุณุงุฎุชุงุฑ JSONField ุจุฑุง ููุงูุต:**
```json
{
    "personal_photo": true,      // ุฏุงุฑุง ููุต
    "national_card": false,      // ุจุฏูู ููุต
    "id_card": true,             // ุฏุงุฑุง ููุต
    "bsc_cert": false,
    "transcript": true
}
```

**API ูพูู ุงุฏูู:**
```http
POST /api/admin/applications/{id}/review-documents/
{
    "document_type": "IDENTITY_DOCS",
    "status": "APPROVED_WITH_DEFECT",
    "defects": {
        "personal_photo": true,
        "national_card": false
    },
    "comment": "ุนฺฉุณ ูพุฑุณูู ฺฉูุช ููุงุณุจ ูุฏุงุฑุฏ"
}
```

---

## ๐ ฺฺฉโูุณุช ุชฺฉูู ูพุฑููุฏู

### **ุจุฑุง ุฏุงูุทูุจ:**
- [ ] ูุฑุญูู 1: ุงูุชุฎุงุจ ุฑุดุชู (ุญุฏุงูู 1ุ ุญุฏุงฺฉุซุฑ 3)
- [ ] ูุฑุญูู 2: ุชฺฉูู ุงุทูุงุนุงุช ุดุฎุต (11 ููุฏ)
- [ ] ูุฑุญูู 3: ุขูพููุฏ 3 ูุฏุฑฺฉ ุดูุงุณุง
- [ ] ูุฑุญูู 4: ุชฺฉูู ุงุทูุงุนุงุช ุชุญุตู
- [ ] ูุฑุญูู 5: ุขูพููุฏ ูุฏุงุฑฺฉ ุชุญุตู (ุญุฏุงูู ุฑุฒููุฑุงุช)
- [ ] ูุฑุญูู 6: ุซุจุช ุณูุงุจู ุนูู (ุงุฎุชุงุฑ)
- [ ] ุงุฑุณุงู ููุง ูุฑู

### **ุจุฑุง ุงุฏูู:**
- [ ] ุจุฑุฑุณ ูุฏุงุฑฺฉ ุดูุงุณุง
- [ ] ุจุฑุฑุณ ูุฏุงุฑฺฉ ุชุญุตู
- [ ] ุชุงุฏ ุง ุจุฑฺฏุดุช ูพุฑููุฏู

---

## ๐ ูฺฉุงุช ุงููุช ู ุงุนุชุจุงุฑุณูุฌ

### **Validators:**
```python
# apps/api/validators.py

def validate_national_id(value):
    """ุงุนุชุจุงุฑุณูุฌ ฺฉุฏ ูู 10 ุฑูู"""
    if not value.isdigit() or len(value) != 10:
        raise ValidationError("ฺฉุฏ ูู ุจุงุฏ 10 ุฑูู ุจุงุดุฏ")

def validate_mobile_number(value):
    """ุงุนุชุจุงุฑุณูุฌ ุดูุงุฑู ููุจุงู"""
    if not re.match(r'^09\d{9}$', value):
        raise ValidationError("ูุฑูุช ุดูุงุฑู ููุจุงู ูุงูุนุชุจุฑ ุงุณุช")

def validate_gpa(value):
    """ุงุนุชุจุงุฑุณูุฌ ูุนุฏู"""
    if value < 0 or value > 20:
        raise ValidationError("ูุนุฏู ุจุงุฏ ุจู 0 ุชุง 20 ุจุงุดุฏ")

def validate_birth_year(value):
    """ุงุนุชุจุงุฑุณูุฌ ุณุงู ุชููุฏ"""
    if value < 1320 or value > 1390:
        raise ValidationError("ุณุงู ุชููุฏ ูุงูุนุชุจุฑ ุงุณุช")
```

---

## ๐ฏ ุชูุงูุช ุจุง ุฏฺฏุฑ ูุฑุงุฎูุงูโูุง

ุงู ุฑููุฏ **ููุท ุจุฑุง ุงุณุชุนุฏุงุฏ ุฏุฑุฎุดุงู ุงุฑุดุฏ** ุงุณุช.

**ุฏฺฏุฑ ูุฑุงุฎูุงูโูุง:**
- **ุงุณุชุนุฏุงุฏ ุฏุฑุฎุดุงู ุฏฺฉุชุฑ** (`PHD_TALENT`): ูุงุฒ ุจู ุณูุงุจู ุงุฑุดุฏ + ูุฏุงุฑฺฉ ุจุดุชุฑ
- **ุขุฒููู ุฏฺฉุชุฑ** (`PHD_EXAM`): ูุงุฒ ุจู ฺฉุงุฑูุงูู ุขุฒููู + ุฑุฒููู ุชุญููุงุช
- **ุงูููพุงุฏ ุนูู** (`OLYMPIAD`): ูุงุฒ ุจู ูุฏุงุฑฺฉ ุงูููพุงุฏ + ุณูุงุจู ุฑูุงุจุช

---

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง ุขูพููุฏ

```
media/
โโโ applications/
    โโโ {tracking_code}/        # ูุซุงู: ABC123XY45
        โโโ documents/
            โโโ PERSONAL_PHOTO/
            โ   โโโ photo.jpg
            โโโ NATIONAL_CARD/
            โ   โโโ national_card.pdf
            โโโ ID_CARD/
            โ   โโโ birth_cert.pdf
            โโโ BSC_CERT/
            โ   โโโ degree.pdf
            โโโ EXCELLENCE_CERT/
            โ   โโโ certificate.pdf
            โโโ TRANSCRIPT/
                โโโ transcript.pdf
```

---

## ๐ API Endpoints (ุฎูุงุตู)

```
# ูุฑุญูู 1: ุงูุชุฎุงุจ ุฑุดุชู
GET    /api/programs/?search={query}
POST   /api/applications/{id}/choices/

# ูุฑุญูู 2: ุงุทูุงุนุงุช ุดุฎุต
PATCH  /api/accounts/users/{id}/
PATCH  /api/accounts/profiles/{id}/

# ูุฑุญูู 3 ู 5: ูุฏุงุฑฺฉ
POST   /api/documents/upload/
GET    /api/documents/?application={id}
DELETE /api/documents/{id}/

# ูุฑุญูู 4: ุงุทูุงุนุงุช ุชุญุตู
POST   /api/applications/education-records/
GET    /api/universities/?search={query}

# ูุฑุญูู 6: ุณูุงุจู ุนูู
POST   /api/applications/scientific-records/

# ุงุฑุณุงู ููุง
POST   /api/applications/{id}/submit/

# ูพูู ุงุฏูู
POST   /api/admin/applications/{id}/review-documents/
GET    /api/admin/applications/?status=UNDER_REVIEW
```

---

## โ ูุฏูโูุง ุจูโุฑูุฒ ุดุฏู

- โ `User` - ุงุถุงูู ุดุฏู ููุฏูุง ุดูุงุณูุงูู ู ุชููุฏ
- โ `ApplicantProfile` - ุณุงุฏูโุณุงุฒ (ููุท ุขุฏุฑุณ ู ุชููู)
- โ `ApplicationEducationRecord` - ุจูโุฑูุฒุฑุณุงู ููุฏูุง
- โ `ApplicationDocument` - ุฏุณุชูโุจูุฏ ูุฏุงุฑฺฉ
- โ `FormReview` - ุชุบุฑ ุจู ุณุณุชู ุจุฑุฑุณ ุฏู ุจุฎุด
- โ `ApplicationChoice` - ุจุฏูู ุชุบุฑ
- โ `ScientificRecord` - ุจุฏูู ุชุบุฑ

---

**ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู:** 5 ุฏ 1404  
**ูุณุฎู:** 1.0 - ุงุณุชุนุฏุงุฏ ุฏุฑุฎุดุงู ุงุฑุดุฏ (MA_TALENT)
